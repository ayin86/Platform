var basered="#ff0000",red=chroma(basered).set("hsl.l",0.6).hex(),black="#000",white="#fff",red_lrr=chroma(red).brighten(3).hex(),red_lr=chroma(red).brighten(2).hex(),red_l=chroma(red).brighten(1).hex(),red_d=chroma(red).darken(1).hex(),red_dr=chroma(red).darken(2).hex(),red_drr=chroma(red).darken(3).hex(),orange=chroma(red).set("hsl.h",30).hex(),orange_lrr=chroma(orange).brighten(3).hex(),orange_lr=chroma(orange).brighten(2).hex(),orange_l=chroma(orange).brighten(1).hex(),orange_d=chroma(orange).darken(1).hex(),orange_dr=chroma(orange).darken(2).hex(),orange_drr=chroma(orange).darken(3).hex(),yellow_o=chroma(red).set("hsl.h",60).hex(),yellow=chroma(yellow_o).set("hsl.s",0.8).hex(),yellow_lrr=chroma(yellow).brighten(3).hex(),yellow_lr=chroma(yellow).brighten(2).hex(),yellow_l=chroma(yellow).brighten(1).hex(),yellow_d=chroma(yellow).darken(1).hex(),yellow_dr=chroma(yellow).darken(2).hex(),yellow_drr=chroma(yellow).darken(3).hex(),chartreuse_o=chroma(red).set("hsl.h",90).hex(),chartreuse=chroma(chartreuse_o).set("hsl.s",0.8).hex(),chartreuse_lrr=chroma(chartreuse).brighten(1.8).hex(),chartreuse_lr=chroma(chartreuse).brighten(1.2).hex(),chartreuse_l=chroma(chartreuse).brighten(0.6).hex(),chartreuse_d=chroma(chartreuse).darken(1).hex(),chartreuse_dr=chroma(chartreuse).darken(2).hex(),chartreuse_drr=chroma(chartreuse).darken(3).hex(),green_o=chroma(red).set("hsl.h",120).hex(),green=chroma(green_o).set("hsl.s",0.8).hex(),green_lrr=chroma(green).brighten(3).hex(),green_lr=chroma(green).brighten(2).hex(),green_l=chroma(green).brighten(1).hex(),green_d=chroma(green).darken(1).hex(),green_dr=chroma(green).darken(2).hex(),green_drr=chroma(green).darken(3).hex(),aquamarine_o=chroma(red).set("hsl.h",150).hex(),aquamarine=chroma(aquamarine_o).set("hsl.s",0.8).hex(),aquamarine_lrr=chroma(aquamarine).brighten(3).hex(),aquamarine_lr=chroma(aquamarine).brighten(2).hex(),aquamarine_l=chroma(aquamarine).brighten(1).hex(),aquamarine_d=chroma(aquamarine).darken(1).hex(),aquamarine_dr=chroma(aquamarine).darken(2).hex(),aquamarine_drr=chroma(aquamarine).darken(3).hex(),cyan_o=chroma(red).set("hsl.h",180).hex(),cyan=chroma(cyan_o).set("hsl.s",0.8).hex(),cyan_lrr=chroma(cyan).brighten(2.5).hex(),cyan_lr=chroma(cyan).brighten(2).hex(),cyan_l=chroma(cyan).brighten(1).hex(),cyan_d=chroma(cyan).darken(1).hex(),cyan_dr=chroma(cyan).darken(2).hex(),cyan_drr=chroma(cyan).darken(3).hex(),blue=chroma(red).set("hsl.h",210).hex(),blue_lrrr=chroma(blue).brighten(3).hex(),blue_lrr=chroma(blue).brighten(2.6).hex(),blue_lr=chroma(blue).brighten(1.8).hex(),blue_l=chroma(blue).brighten(1).hex(),blue_d=chroma(blue).darken(1).hex(),blue_dr=chroma(blue).darken(1.8).hex(),blue_drr=chroma(blue).darken(2.6).hex(),blue_drrr=chroma(blue).darken(3).hex(),indigo=chroma(red).set("hsl.h",240).hex(),indigo_lrr=chroma(indigo).brighten(3).hex(),indigo_lr=chroma(indigo).brighten(2).hex(),indigo_l=chroma(indigo).brighten(1).hex(),indigo_d=chroma(indigo).darken(1).hex(),indigo_dr=chroma(indigo).darken(2).hex(),indigo_drr=chroma(indigo).darken(3).hex(),purple=chroma(red).set("hsl.h",270).hex(),purple_lrr=chroma(purple).brighten(3).hex(),purple_lr=chroma(purple).brighten(2).hex(),purple_l=chroma(purple).brighten(1).hex(),purple_d=chroma(purple).darken(1).hex(),purple_dr=chroma(purple).darken(2).hex(),purple_drr=chroma(purple).darken(3).hex(),pink=chroma(red).set("hsl.h",300).hex(),pink_lrr=chroma(pink).brighten(3).hex(),pink_lr=chroma(pink).brighten(2).hex(),pink_l=chroma(pink).brighten(1).hex(),pink_d=chroma(pink).darken(1).hex(),pink_dr=chroma(pink).darken(2).hex(),pink_drr=chroma(pink).darken(3).hex(),violetred=chroma(red).set("hsl.h",330).hex(),violetred_lrr=chroma(violetred).brighten(3).hex(),violetred_lr=chroma(violetred).brighten(2).hex(),violetred_l=chroma(violetred).brighten(1).hex(),violetred_d=chroma(violetred).darken(1).hex(),violetred_dr=chroma(violetred).darken(2).hex(),violetred_drr=chroma(violetred).darken(3).hex(),gray=chroma(black).set("hsl.l",0.6).hex(),gray_lrr=chroma(gray).brighten(1.5).hex(),gray_lr=chroma(gray).brighten(1).hex(),gray_l=chroma(gray).brighten(0.5).hex(),gray_d=chroma(gray).darken(0.5).hex(),gray_dr=chroma(gray).darken(1).hex(),gray_drr=chroma(gray).darken(1.5).hex();var tc=chroma(blue).darken(0.8).hex(),tc_lrr=chroma(tc).brighten(3).hex(),tc_lr=chroma(tc).brighten(2).hex(),tc_l=chroma(tc).brighten(1).hex(),tc_d=chroma(tc).darken(1).hex(),tc_dr=chroma(tc).darken(2).hex(),tc_drr=chroma(tc).darken(3).hex();var echart1=echarts.init(document.getElementById("chart-stati"));option1={title:{text:"服务器流量统计",textStyle:{color:gray_d}},tooltip:{trigger:"axis"},legend:{data:["电信","网通","其他"],textStyle:{color:gray_d}},toolbox:{feature:{saveAsImage:{}}},grid:{left:"0%",right:"2%",bottom:"0%",containLabel:true},xAxis:[{type:"category",boundaryGap:false,data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],axisLine:{lineStyle:{color:gray_lrr},},axisTick:{lineStyle:{color:gray_lrr},},splitLine:{lineStyle:{color:gray_lrr},},axisLabel:{textStyle:{color:gray_d,align:"center"}}}],yAxis:[{type:"value",axisLine:{lineStyle:{color:gray_lrr},},axisTick:{lineStyle:{color:gray_lrr},},splitLine:{lineStyle:{color:gray_lrr},},axisLabel:{textStyle:{color:gray_d,align:"right"}}}],series:[{name:"电信",type:"line",stack:"总量",smooth:true,areaStyle:{normal:{}},itemStyle:{normal:{color:blue_d}},data:[100,200,400,500,400,200,100,100,200,400,200,100]},{name:"网通",type:"line",stack:"总量",smooth:true,areaStyle:{normal:{}},itemStyle:{normal:{color:blue}},data:[100,200,300,400,300,200,50,50,100,200,100,50]},{name:"其他",type:"line",stack:"总量",smooth:true,areaStyle:{normal:{}},itemStyle:{normal:{color:blue_lr}},data:[200,300,400,300,200,50,50,100,100,100,50,50]}]};var echart2=echarts.init(document.getElementById("chart-datatype"));option2={title:{text:"数据类别",textStyle:{color:gray_d}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{show:true,x:"center",y:"center",width:"100px",textStyle:{color:gray_d},data:["直接访问","邮件营销","联盟广告","视频广告","搜索引擎"]},series:[{name:"数据类别",type:"pie",radius:["60%","85%"],center:["50%","50%"],avoidLabelOverlap:false,label:{normal:{show:false,position:"outside"},emphasis:{show:false,textStyle:{fontSize:"20",color:gray_d}}},labelLine:{normal:{show:false}},data:[{value:335,name:"直接访问",itemStyle:{normal:{color:orange}}},{value:310,name:"邮件营销",itemStyle:{normal:{color:orange_l}}},{value:234,name:"联盟广告",itemStyle:{normal:{color:orange_lr}}},{value:135,name:"视频广告",itemStyle:{normal:{color:chartreuse}}},{value:1548,name:"搜索引擎",itemStyle:{normal:{color:chartreuse_l}}}]}]};var echart3=echarts.init(document.getElementById("chart-bandwidth"));option3={title:{text:"带宽占用率",textStyle:{color:gray_d}},tooltip:{formatter:"{a} <br/>{b} : {c}%"},toolbox:{feature:{restore:{},saveAsImage:{}}},series:[{name:"业务指标",type:"gauge",axisLine:{lineStyle:{color:[[0.8,chartreuse_l],[1,red_l]]}},axisLabel:{textStyle:{color:gray}},axisTick:{lineStyle:{color:white}},splitLine:{lineStyle:{color:white}},radius:"90%",center:["50%","55%"],detail:{formatter:"{value}%",textStyle:{color:gray_d,fontSize:28}},data:[{value:50}]}]};var echart4=echarts.init(document.getElementById("chart-top100"));var xAxisData=[];var data1=[];var data2=[];for(var i=0;i<100;i++){xAxisData.push(""+i);data1.push((Math.sin(i/5)*(i/5-10)+i/6)*5);data2.push((Math.cos(i/5)*(i/5-10)+i/6)*5)}option4={title:{text:"营业额 Top100",textStyle:{color:gray_d}},legend:{data:["业务一","业务二"],align:"left",top:"10px",textStyle:{color:gray_d}},grid:{left:"2%",right:"2%",bottom:"4%",containLabel:true},toolbox:{feature:{magicType:{type:["line","bar","stack","tiled"]},dataView:{},saveAsImage:{pixelRatio:2}}},tooltip:{},xAxis:{data:xAxisData,silent:false,splitLine:{show:false},axisLine:{lineStyle:{color:gray_lrr},},axisTick:{lineStyle:{color:gray_lrr},},axisLabel:{textStyle:{color:gray_d,align:"center"}}},yAxis:{axisLine:{lineStyle:{color:gray_lrr},},axisTick:{lineStyle:{color:gray_lrr},},axisLabel:{textStyle:{color:gray_d,align:"right"}}},series:[{name:"业务一",type:"bar",data:data1,stack:false,itemStyle:{normal:{color:blue}},animationDelay:function(a){return a*10}},{name:"业务二",type:"bar",data:data2,stack:false,itemStyle:{normal:{color:blue_d}},animationDelay:function(a){return a*10+100}}],animationEasing:"elasticOut",animationDelayUpdate:function(a){return a*5}};var echart5=echarts.init(document.getElementById("chart-map"));echart5.showLoading();$.get("../lib/data/weibo.json",function(a){echart5.hideLoading();a=a.map(function(c,j){var h=c[0]/1000;var g=c[1]/1000;var d=[[h,g]];for(var b=2;b<c.length;b+=2){var l=c[b]/1000;var k=c[b+1]/1000;var f=h+l;var e=g+k;d.push([f.toFixed(2),e.toFixed(2),1]);h=f;g=e}return d});echart5.setOption(option={backgroundColor:"#3b435b",title:{text:"全国用户访问数据流量图",subtext:"图例数据来自于微博点赞图",sublink:"http://www.thinkgis.cn/public/sina",left:"center",top:"top",textStyle:{color:"#fff"}},tooltip:{},legend:{left:"left",data:["强","中","弱"],textStyle:{color:"#ccc"}},geo:{name:"强",type:"scatter",map:"china",label:{emphasis:{show:false}},itemStyle:{normal:{areaColor:"#1f2433",borderColor:"#111"},emphasis:{areaColor:"#293044"}}},series:[{name:"弱",type:"scatter",coordinateSystem:"geo",symbolSize:1,large:true,itemStyle:{normal:{shadowBlur:2,shadowColor:blue_dr,color:blue_dr}},data:a[0]},{name:"中",type:"scatter",coordinateSystem:"geo",symbolSize:1,large:true,itemStyle:{normal:{shadowBlur:2,shadowColor:blue,color:blue}},data:a[1]},{name:"强",type:"scatter",coordinateSystem:"geo",symbolSize:1,large:true,itemStyle:{normal:{shadowBlur:2,shadowColor:blue_lr,color:blue_lr}},data:a[2]}]})});function chartChange(){$.timer.set("chartChange",function(){if(option4.series[0].stack==false){option4.series[0].stack=true;option4.series[1].stack=true}else{option4.series[0].stack=false;option4.series[1].stack=false}echart4.setOption(option4,true);option3.series[0].data[0].value=(Math.random()*100).toFixed(1)-0;echart3.setOption(option3,true);$(".progress .progress-bar").each(function(b,c){var a=((Math.random()*100)+0).toFixed(0);$(c).css({width:a+"%"}).text(a+"%")});chartChange()},10000)}$.timer.set("echarts",function(){echart1.setOption(option1);echart1.resize();echart2.setOption(option2);echart2.resize();echart3.setOption(option3);echart3.resize();echart4.setOption(option4);echart4.resize();echart5.resize()},500);$(window).resize(function(){chartResize()});function chartResize(){$.timer.set("chart",function(){echart1.resize();echart2.resize();echart3.resize();echart4.resize();echart5.resize()},1000)};